# 異世界転生xドカポン
## ジャンル
パーティーゲーム
## 概要
異世界転生を題材としたドカポン風ゲーム。すごろく風のマップを探索してアイテムや装備を集めたりレベルを上げたりして、村を襲っている敵を倒し名声を上げていく。名声が最も高いプレイヤーの勝利。
プレイヤー同士でも戦闘でき、戦闘に勝てば名声が奪える。
たまにイベントが発生する。内容は様々だが、誰かが突然有利になったり、名声の低いプレイヤーを救済する内容が多い。
1~5人プレイに対応。マルチプレイにも対応し、インターネットを介して離れた友達ともプレイできる。
## 参考にするゲーム
 - ドカポン321
 - 桃太郎電鉄
 - DicyDungeon
## 設計
### ネットワーク
オンラインプレイに対応するため、WebSocketかWebRTCの採用を検討。
|フレームワーク|利点|難点|
|---|---|---|
|WebSocket|実装の自由度が高い|Unity公式サポートがない<br>サーバーも実装が必要<br>|
|WebRTC|公式でサポートされている|無料だと転送量に縛りが生まれる可能性が高い<br>現状Androidで動かない|
#### ネットワークまわり調査結果
websocket-sharp以外のプラグインがまともに動かなかった。
websocket-sharpがsocket.ioに対応してないので、wsで実装しなければならなくなった
webRTCは通信経路確立にICEというフレームワークを使っている。
ICEは、STUNサーバー、TURNサーバーの一覧から最も適したものを選び、シグナリングサーバーで利用するサーバーをピアに通知して通信を開始する仕組みになっているらしい。
STUNは外部から見た自分のIPやポートを自分自身に通知する役割
TURNは通信データをリレーする役割
シグナリングはどのSTUN/TURNサーバーで通信を開始するかを示し合わせる役割
基本的にSTUNでNAT越えできるならSTUNサーバーを使う。
出来なさそうならTURNを使う。TURNはサーバーにも負荷がかかるので、なるべくは接続を確立したらサーバーが不要になるSTUNで済ませたいらしい。
利用可能
## 基本的なルール
依存関係

View 描画にかかわる処理

↓

UseCase 内部的な処理

↓

Manager 特定のInterfaceを実装したインスタンスを集約して実装している関数を実行

↓

Model データ



